--- flite-1.2-release/config/common_make_rules..mk	2003-02-18 19:17:21 +0300
+++ flite-1.2-release/config/common_make_rules	2006-04-10 01:13:53 +0400
@@ -52,7 +52,14 @@
 LIBDIR=$(TOP)/lib
 
 FLITELIBS = $(TOP)/lib/libflite.a
-LDFLAGS += -L$(TOP)/lib -lflite -lm $(AUDIOLIBS) $(OTHERLIBS)
+LDFLAGS += -L$(TOP)/lib -lflite $(OTHERLIBS)
+
+flite_LDLIBS = $(AUDIOLIBS) -lm
+flite_cmulex_LDLIBS = -lflite
+flite_usenglish_LDLIBS = -lflite
+flite_cmu_us_kal_LDLIBS = -lflite_cmulex -lflite_usenglish
+flite_cmu_us_kal16_LDLIBS = -lflite_cmulex -lflite_usenglish
+flite_cmu_time_awb_LDLIBS = -lflite -lflite_cmulex -lflite_usenglish
 
 ifdef SHFLAGS
 SOOBJS = $(OBJS:.o=.os)
@@ -88,7 +95,7 @@
 	@ rm -rf shared_os && mkdir shared_os
 	@ rm -f $@ $(LIBDIR)/$@.${PROJECT_VERSION} $(LIBDIR)/$@.${PROJECT_SHLIB_VERSION} 
 	@ (cd shared_os && ar x ../$<)
-	@ (cd shared_os && $(CC) -shared -Wl,-soname,$@.${PROJECT_SHLIB_VERSION} -o ../$@.${PROJECT_VERSION} *.os)
+	@ (cd shared_os && $(CC) -shared -Wl,-soname,$@.${PROJECT_SHLIB_VERSION} -Wl,-rpath-link -Wl,../ -L../ -o ../$@.${PROJECT_VERSION} *.os $($(@:lib%.so=%_LDLIBS)))
 	@ ln -s $(LIBDIR)/$@.${PROJECT_VERSION} $(LIBDIR)/$@.${PROJECT_SHLIB_VERSION}
 	@ ln -s $(LIBDIR)/$@.${PROJECT_SHLIB_VERSION} $(LIBDIR)/$@
 	@ rm -rf shared_os
--- flite-1.2-release/doc/Makefile..mk	2002-12-30 15:57:30 +0300
+++ flite-1.2-release/doc/Makefile	2006-04-10 01:12:41 +0400
@@ -40,7 +40,7 @@
 ALL_DIRS=
 FILES = Makefile flite.texi intro.txt alice stuff.ed
 
-ALL = 
+ALL = flite.html
 
 include $(TOP)/config/common_make_rules
 
--- flite-1.2-release/main/Makefile..mk	2003-02-20 01:17:31 +0300
+++ flite-1.2-release/main/Makefile	2006-04-10 01:12:41 +0400
@@ -49,11 +49,11 @@
       $(BINDIR)/t2p$(EXEEXT)
 
 flite_LIBS = flite_$(FL_VOX) flite_$(FL_LANG) flite_$(FL_LEX) 
-flite_LIBS_flags = -L$(LIBDIR) $(flite_LIBS:%=-l%)
+flite_LIBS_flags = -L$(LIBDIR) -Wl,-rpath-link -Wl,$(LIBDIR) $(flite_LIBS:%=-l%)
 flite_LIBS_deps = $(flite_LIBS:%=$(LIBDIR)/lib%.a)
 
 flite_time_LIBS = flite_cmu_time_awb flite_$(FL_LANG) flite_$(FL_LEX)
-flite_time_LIBS_flags = -L$(LIBDIR) $(flite_time_LIBS:%=-l%)
+flite_time_LIBS_flags = -L$(LIBDIR) -Wl,-rpath-link -Wl,$(LIBDIR) $(flite_time_LIBS:%=-l%)
 flite_time_LIBS_deps = $(flite_time_LIBS:%=$(LIBDIR)/lib%.a)
 
 include $(TOP)/config/common_make_rules
--- flite-1.2-release/Makefile..mk	2003-02-17 18:14:05 +0300
+++ flite-1.2-release/Makefile	2006-04-10 01:15:02 +0400
@@ -41,7 +41,7 @@
 ###########################################################################
 TOP=.
 DIRNAME=.
-BUILD_DIRS = include src lang lib tools doc main
+BUILD_DIRS = include src lang lib main doc
 ALL_DIRS=config $(BUILD_DIRS) testsuite sapi
 CONFIG=configure configure.in config.sub config.guess \
        missing install-sh mkinstalldirs
